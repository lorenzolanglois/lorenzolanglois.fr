"use strict";const eraser=document.getElementById("eraser"),canvas=document.getElementById("drawable"),footer=document.getElementsByTagName("footer")[0],credits=document.getElementsByTagName("credits")[0],creditsOverlay=document.querySelector("overlay:has(credits)"),overlays=document.querySelectorAll("overlay"),galleryImages=document.querySelectorAll(".gallery a"),imageDisplay=document.querySelector("overlay img:first-child"),languageLinks=document.querySelectorAll("topbar a:not(:has(img))"),context=canvas.getContext("2d",{willReadFrequently:!0}),allowedTags=new Set(["DIV","BODY","FORM"]),languageNames=["frFran\xe7ais","enEnglish"];var isPainting=!1,lang=window.location.href.split("/").pop()||"fr";canvas.width=window.innerWidth,canvas.height=document.body.clientHeight,context.lineWidth=5,context.lineCap="round",context.strokeStyle="yellow",imageDisplay.insertAdjacentHTML("afterend",'<img src="assets/spinner.svg" alt="Charge">');const loadingImageDisplay=document.querySelector("overlay img:last-child");function changeLanguage(e){fetch("lang/lang-"+e+".json").then(e=>e.json()).then(t=>{document.querySelectorAll("[data-translate]").forEach(e=>{let n=e.getAttribute("data-translate"),a=t.text[n],l=t.alt[n],i=t.title[n],r=t.href[n];var s=!1;e.childNodes.forEach(e=>{e.nodeType===Node.TEXT_NODE&&!s&&a&&(e.textContent=a,s=!0)}),l&&(e.alt=l),i&&(e.title=i),r&&(e.href=r)}),document.documentElement.lang=e,document.title="Lorenzo Langlois - "+t.text.developer})}Array.from(document.getElementsByTagName("video")).forEach(e=>{e.poster=e.poster.replace("_small","_thumbnail")}),window.addEventListener("submit",function(){document.getElementById("contactForm").style.display="none",document.getElementById("contactText").style.display="block",canvas.height=document.body.clientHeight}),window.addEventListener("resize",function(){if(window.innerHeight>canvas.height||window.innerWidth>canvas.width){let e=context.getImageData(0,0,canvas.width,canvas.height);canvas.width=window.innerWidth,canvas.height=document.body.clientHeight,context.putImageData(e,0,0),context.lineWidth=5,context.lineCap="round",context.strokeStyle="yellow"}}),document.body.addEventListener("pointerdown",function(e){allowedTags.has(e.target.tagName)&&"mouse"===e.pointerType&&(isPainting=!0,eraser.style.display="block",document.getSelection().removeAllRanges(),document.documentElement.style["-webkit-user-select"]="none",document.documentElement.style.userSelect="none")}),document.body.addEventListener("pointerup",function(){isPainting=!1,context.beginPath(),document.documentElement.style["-webkit-user-select"]="auto",document.documentElement.style.userSelect="auto"}),document.body.addEventListener("pointermove",function(e){isPainting&&(context.lineTo(e.clientX,e.clientY+window.scrollY),context.stroke(),context.beginPath(),context.moveTo(e.clientX,e.clientY+window.scrollY))}),eraser.addEventListener("click",function(){eraser.style.display="none",context.clearRect(0,0,canvas.width,canvas.height)}),eraser.addEventListener("pointerdown",function(e){e.preventDefault(),eraser.style.transform="scale(1.05)"}),eraser.addEventListener("pointerup",function(){eraser.style.transform="scale(1)"}),overlays.forEach(function(e){e.addEventListener("click",function(t){"OVERLAY"===t.target.tagName&&(e.style.display="none")})}),footer.addEventListener("click",function(){creditsOverlay.style.display="block"}),galleryImages.forEach(function(e){e.addEventListener("click",function(t){t.preventDefault(),loadingImageDisplay.style.display="block",imageDisplay.parentElement.style.display="block",imageDisplay.src=e.href,imageDisplay.alt=e.getElementsByTagName("IMG")[0].alt})}),imageDisplay.addEventListener("load",function(){loadingImageDisplay.style.display="none"}),languageLinks.forEach(function(e){e.addEventListener("click",function(t){t.preventDefault(),e.innerHTML=languageNames.find(e=>e.startsWith(lang)).slice(2);var n=lang;"fr"===(lang=t.target.href.split("/").pop()||"fr")?window.history.pushState("","","/"):window.history.pushState("","",t.target.href),e.href="fr"===n?"/":n,changeLanguage(lang)})});