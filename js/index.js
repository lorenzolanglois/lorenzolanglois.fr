"use strict";const eraser=document.getElementById("eraser"),canvas=document.getElementById("drawable"),footer=document.getElementsByTagName("footer")[0],creditsOverlay=document.querySelector("overlay:has(credits)"),overlays=document.querySelectorAll("overlay"),galleryImages=document.querySelectorAll(".gallery a"),imageDisplay=document.querySelector("overlay img:first-child"),languageLinks=document.querySelectorAll("topbar a:not(:has(img))"),context=canvas.getContext("2d",{willReadFrequently:!0}),allowedTags=new Set(["DIV","BODY","FORM"]),languageNames=["frFran√ßais","enEnglish"];var isPainting=!1,lang=window.location.href.split("/").pop().split("#")[0]||"fr";canvas.width=window.innerWidth,canvas.height=document.body.clientHeight,context.lineWidth=5,context.lineCap="round",context.strokeStyle="yellow",document.documentElement.style.cursor='url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxwYXRoIHRyYW5zZm9ybT0icm90YXRlKDkwLCA1MCwgNTApIiBkPSJNNjkgMTFoLTFMMTIgNjh2MWwxOSAxOWgxbDU2LTU3di0xTDY5IDExek05NyA5bC02LTZhMTAgMTAgMCAwIDAtMTQgMGwtNiA2djFsMTkgMTloMWw2LTZhMTAgMTAgMCAwIDAgMC0xNHpNMTAgNzAgMCA5OWwxIDEgMjgtMTBoMXYtMUwxMCA3MHoiLz48L3N2Zz4="), auto',imageDisplay.insertAdjacentHTML("afterend",'<img src="assets/spinner.svg" alt="Charge">');const loadingImageDisplay=document.querySelector("overlay img:last-child");function changeLanguage(_lang){fetch("lang/lang-"+_lang+".json").then(response=>response.json()).then(data=>{document.querySelectorAll("[data-translate]").forEach(el=>{const key=el.getAttribute("data-translate"),translationText=data.text[key],translationAlt=data.alt[key],translationTitle=data.title[key],translationHref=data.href[key];var isTextReplaced=!1;el.childNodes.forEach(node=>{node.nodeType===Node.TEXT_NODE&&!isTextReplaced&&translationText&&(node.textContent=translationText,isTextReplaced=!0)}),translationAlt&&(el.alt=translationAlt),translationTitle&&(el.title=translationTitle),translationHref&&(el.href=translationHref)}),document.documentElement.lang=_lang,document.title="Lorenzo Langlois - "+data.text.developer})}Array.from(document.getElementsByTagName("video")).forEach(element=>{element.poster=element.poster.replace("_small","_thumbnail")}),Array.from(document.getElementsByTagName("preview")).forEach(element=>{element.style.backgroundImage="linear-gradient(rgba(219, 219, 219, 0.3), rgba(0, 0, 0, 0.5)), url('"+element.getAttribute("src")+"')",["mouseenter","click"].forEach(evt=>element.addEventListener(evt,function(e){const iframe=document.createElement("iframe");iframe.className="main",iframe.src="https://www.youtube-nocookie.com/embed/"+e.target.getAttribute("video"),iframe.title="YouTube video player",iframe.frameBorder="0",iframe.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",iframe.referrerPolicy="strict-origin-when-cross-origin",iframe.allowFullscreen=!0,e.target.parentElement.appendChild(iframe),e.target.style.setProperty("--preview-icon","url('')"),e.target.className="main previewfadeout"},{once:!0}))}),window.addEventListener("submit",function(){document.getElementById("contactForm").style.display="none",document.getElementById("contactText").style.display="block",canvas.height=document.body.clientHeight}),window.addEventListener("resize",function(){if(window.innerHeight>canvas.height||window.innerWidth>canvas.width){const background=context.getImageData(0,0,canvas.width,canvas.height);canvas.width=window.innerWidth,canvas.height=document.body.clientHeight,context.putImageData(background,0,0),context.lineWidth=5,context.lineCap="round",context.strokeStyle="yellow"}}),document.body.addEventListener("pointerdown",function(e){allowedTags.has(e.target.tagName)&&"mouse"===e.pointerType&&(isPainting=!0,eraser.style.display="block",document.getSelection().removeAllRanges(),document.documentElement.style["-webkit-user-select"]="none",document.documentElement.style.userSelect="none",document.getElementById("up").style.right="100px")}),document.body.addEventListener("pointerup",function(){isPainting=!1,context.beginPath(),document.documentElement.style["-webkit-user-select"]="auto",document.documentElement.style.userSelect="auto"}),document.body.addEventListener("pointermove",function(e){isPainting&&(context.lineTo(e.clientX,e.clientY+window.scrollY),context.stroke(),context.beginPath(),context.moveTo(e.clientX,e.clientY+window.scrollY))}),window.addEventListener("scroll",function(){window.scrollY>=500?document.getElementById("up").style.display="block":document.getElementById("up").style.display="none","block"===eraser.style.display?document.getElementById("up").style.right="100px":document.getElementById("up").style.right="10px"}),eraser.addEventListener("click",function(){eraser.style.display="none",context.clearRect(0,0,canvas.width,canvas.height),document.getElementById("up").style.right="10px"}),eraser.addEventListener("pointerdown",function(e){e.preventDefault(),eraser.style.transform="scale(1.05)"}),eraser.addEventListener("pointerup",function(){eraser.style.transform="scale(1)"}),document.getElementById("up").addEventListener("pointerdown",function(e){e.preventDefault(),document.getElementById("up").style.transform="scale(1.05)"}),document.getElementById("up").addEventListener("pointerup",function(e){e.preventDefault(),document.getElementById("up").style.transform="scale(1)"}),overlays.forEach(function(elem){elem.addEventListener("click",function(e){"OVERLAY"===e.target.tagName&&(elem.style.display="none")})}),footer.addEventListener("click",function(){creditsOverlay.style.display="block"}),galleryImages.forEach(function(elem){elem.addEventListener("click",function(e){e.preventDefault(),loadingImageDisplay.style.display="block",imageDisplay.parentElement.style.display="block",imageDisplay.src=elem.href,imageDisplay.alt=elem.getElementsByTagName("IMG")[0].alt})}),imageDisplay.addEventListener("load",function(){loadingImageDisplay.style.display="none"}),languageLinks.forEach(function(elem){elem.addEventListener("click",function(e){e.preventDefault(),elem.innerHTML=languageNames.find(item=>item.startsWith(lang)).slice(2);var oldLang=lang;"fr"===(lang=e.target.href.split("/").pop()||"fr")?window.history.pushState("","","/"):window.history.pushState("","",e.target.href),elem.href="fr"===oldLang?"/":oldLang,changeLanguage(lang)})});